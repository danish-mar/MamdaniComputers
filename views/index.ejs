<%# layout('layout') removed because it's handled in app.js %>

    <div x-data="{ 
    filter: 'all',
    products: [],
    loading: true,
    async init() {
        try {
            const allProducts = await ProductsFetcher.getProducts();
            // Take the latest 6 products for the homepage
            this.products = allProducts.slice(0, 6);
        } catch (error) {
            console.error('Error loading products:', error);
        } finally {
            this.loading = false;
        }
    },
    get filteredProducts() {
        if (this.filter === 'all') return this.products;
        return this.products.filter(p => p.isSold === (this.filter === 'sold'));
    }
}">

        <!-- Hero Section -->
        <section class="relative min-h-[90vh] flex items-center justify-center overflow-hidden pt-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <div class="reveal-on-scroll">
                    <span
                        class="inline-block py-2 px-6 bg-apple-blue/5 text-apple-blue text-xs font-bold tracking-[0.2em] uppercase rounded-full mb-10 border border-apple-blue/10">Premium
                        Sales & Surgical Repairs</span>
                    <h1
                        class="text-6xl md:text-[120px] font-black tracking-tighter text-apple-dark dark:text-white mb-12 leading-[0.95] drop-shadow-sm">
                        Think Further.<br>
                        <span class="gradient-text">Build Better.</span>
                    </h1>
                    <p class="mt-10 max-w-2xl mx-auto text-2xl md:text-3xl text-gray-400 font-light leading-relaxed">
                        Chhatrapati Sambhajinagar's elite destination for high-performance computing and micro-component
                        repairs.
                    </p>
                    <div class="mt-16 flex flex-col sm:flex-row justify-center items-center gap-8">
                        <a href="/products"
                            class="group px-12 py-6 bg-apple-dark text-white rounded-full font-bold text-xl hover:bg-black transition-all flex items-center shadow-2xl shadow-black/10">
                            The Catalog
                            <i
                                class="fas fa-chevron-right ml-4 text-xs transition-transform group-hover:translate-x-2"></i>
                        </a>
                        <a href="/repair"
                            class="text-apple-blue font-bold text-xl hover:underline transition-all group flex items-center">
                            Repair Studio
                            <i class="fas fa-tools ml-3 text-sm opacity-0 group-hover:opacity-100 transition-all"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Dynamic Background -->
            <div class="absolute inset-0 -z-10 bg-white dark:bg-black transition-colors duration-500">
                <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-apple-blue/10 rounded-full blur-[120px]">
                </div>
                <div
                    class="absolute bottom-[-10%] right-[-10%] w-[30%] h-[30%] bg-accent-500/10 rounded-full blur-[100px]">
                </div>
            </div>
        </section>

        <!-- Bento Feature Section -->
        <section class="py-32 bg-white dark:bg-black transition-colors duration-500 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <!-- Large Card -->
                    <div
                        class="reveal-on-scroll md:col-span-2 md:row-span-2 bento-card p-12 bg-[#fafafa] dark:bg-[#1c1c1e] flex flex-col justify-center">
                        <div
                            class="w-16 h-16 bg-white dark:bg-white/10 rounded-2xl shadow-sm flex items-center justify-center text-apple-blue text-3xl mb-8">
                            <i class="fas fa-microchip"></i>
                        </div>
                        <h3 class="text-3xl font-bold mb-4 dark:text-white">Precision Components</h3>
                        <p class="text-gray-500 dark:text-gray-400 text-lg leading-relaxed">We source only Tier-1 parts
                            directly from
                            manufacturers. Every component is rigorously tested for the "Mamdani Standard" before it
                            reaches your machine.</p>
                    </div>
                    <!-- Tall Card -->
                    <div class="reveal-on-scroll md:col-span-2 bento-card p-12 bg-apple-blue text-white overflow-hidden relative"
                        style="transition-delay: 100ms;">
                        <div class="relative z-10">
                            <h3 class="text-3xl font-bold mb-4">Software Solution</h3>
                            <p class="text-blue-100 text-lg leading-relaxed">Exclusive software optimizations for every
                                build we deliver.</p>
                        </div>
                        <div class="absolute -bottom-10 -right-10 w-48 h-48 bg-white/10 rounded-full blur-3xl"></div>
                    </div>
                    <!-- Small Card 1 -->
                    <div class="reveal-on-scroll bento-card p-8 bg-apple-gray group" style="transition-delay: 200ms;">
                        <div class="text-2xl text-apple-dark mb-4 transition-transform group-hover:scale-110">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4 class="font-bold text-xl">Privacy First</h4>
                        <p class="text-gray-500 text-sm mt-2">Surgical repairs with 100% data zero-touch protocols.</p>
                    </div>
                    <!-- Small Card 2 -->
                    <div class="reveal-on-scroll bento-card p-8 bg-apple-gray group" style="transition-delay: 300ms;">
                        <div class="text-2xl text-accent-500 mb-4 transition-transform group-hover:scale-110">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h4 class="font-bold text-xl">Eco System</h4>
                        <p class="text-gray-500 text-sm mt-2">Zero-waste refurbishment for a greener planet.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- horizontal store section -->
        <section id="store" class="py-32 overflow-hidden bg-[#fbfbfd] dark:bg-black transition-colors duration-500">
            <div
                class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-16 flex flex-col md:flex-row justify-between items-end gap-8">
                <div class="reveal-on-scroll">
                    <h2 class="text-5xl md:text-6xl font-black text-apple-dark dark:text-white mb-4">The Store.</h2>
                    <p class="text-2xl text-gray-400 font-light">Explore the latest in high-performance computing.</p>
                </div>
                <!-- Interactive Filters -->
                <div
                    class="reveal-on-scroll flex flex-col md:flex-row items-center gap-4 bg-apple-gray dark:bg-white/5 p-1 rounded-full shrink-0">
                    <div class="flex">
                        <button @click="filter = 'all'"
                            :class="filter === 'all' ? 'bg-white dark:bg-white/10 shadow-sm font-bold text-apple-dark dark:text-white' : 'text-gray-500'"
                            class="px-8 py-3 rounded-full text-sm transition-all duration-300">All</button>
                        <button @click="filter = 'available'"
                            :class="filter === 'available' ? 'bg-white dark:bg-white/10 shadow-sm font-bold text-apple-dark dark:text-white' : 'text-gray-500'"
                            class="px-8 py-3 rounded-full text-sm transition-all duration-300">Available</button>
                    </div>
                    <a href="/products"
                        class="hidden md:flex px-6 py-3 text-apple-blue font-bold text-sm hover:underline items-center">
                        Full Catalog <i class="fas fa-external-link-alt ml-2 text-xs"></i>
                    </a>
                </div>
            </div>

            <!-- Horizontal Scroll Rack -->
            <div class="relative group">
                <div x-show="loading" class="flex justify-center py-20">
                     <div class="w-12 h-12 border-4 border-apple-blue border-t-transparent rounded-full animate-spin"></div>
                </div>
                <div x-show="!loading" class="flex overflow-x-auto space-x-6 md:space-x-8 px-6 md:px-[calc(50vw-640px)] scrollbar-hide snap-x snap-mandatory"
                    style="scrollbar-width: none; -ms-overflow-style: none;">
                    <template x-for="product in filteredProducts" :key="product.id">
                        <a :href="'/product/' + product.id" class="snap-center shrink-0 w-[85vw] sm:w-[400px] group/card cursor-pointer block">
                            <div
                                class="bento-card aspect-[4/5] relative bg-white dark:bg-[#1c1c1e] overflow-hidden rounded-[2rem]">
                                <img :src="product.images?.[0] || 'https://via.placeholder.com/800x1000?text=No+Image'" :alt="product.name"
                                    class="w-full h-full object-cover rounded-[2rem] transition-transform duration-1000 group-hover/card:scale-110">
                                <div
                                    class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover/card:opacity-100 transition-opacity duration-500">
                                </div>
                                <div
                                    class="absolute bottom-8 left-8 text-white opacity-0 translate-y-4 group-hover/card:opacity-100 group-hover/card:translate-y-0 transition-all duration-500">
                                    <span class="text-xs font-bold uppercase tracking-widest mb-2 block"
                                        x-text="product.isSold ? 'Sold' : 'Available'"></span>
                                    <h4 class="text-2xl font-bold" x-text="product.name"></h4>
                                </div>
                            </div>
                            <div class="mt-6 px-4">
                                <h4 class="text-xl font-bold text-apple-dark dark:text-white mb-2"
                                    x-text="product.name"></h4>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400 font-medium"
                                        x-text="'â‚¹' + product.price.toLocaleString('en-IN')"></span>
                                    <span
                                        class="text-apple-blue font-bold text-sm transform transition-transform group-hover/card:translate-x-2">Learn
                                        more <i class="fas fa-chevron-right ml-1"></i></span>
                                </div>
                            </div>
                        </a>
                    </template>
                </div>
                <!-- Custom Scroll Indicator/Guide -->
                <div class="mt-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="w-full h-[2px] bg-apple-gray relative">
                        <div class="absolute top-0 left-0 h-full bg-apple-blue transition-all duration-300"
                            style="width: 20%;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTAs & Footer-like CTA -->
        <section class="py-48 bg-white dark:bg-black transition-colors duration-500 relative overflow-hidden">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <div class="reveal-on-scroll">
                    <h2 class="text-5xl md:text-7xl font-black text-apple-dark dark:text-white mb-12">Built for the <br>
                        <span class="gradient-text">Uncompromising.</span></h2>
                    <div class="flex flex-col sm:flex-row justify-center gap-6">
                        <a href="/contact"
                            class="px-12 py-6 bg-apple-dark dark:bg-apple-blue text-white rounded-full font-bold text-xl hover:scale-105 transition-all shadow-xl shadow-black/10">Start
                            a Project</a>
                        <a href="/services"
                            class="px-12 py-6 bg-apple-gray dark:bg-white/10 text-apple-dark dark:text-white rounded-full font-bold text-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-all">Explore
                            Repair Lab</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <style>
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>